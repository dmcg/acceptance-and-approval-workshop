<!html>
<html>
<head>
  <title>${title}</title>
  <link rel="stylesheet" type="text/css" href="${_resourcedir}/style.css"/>
  <link rel="stylesheet" type="text/css" href="${_resourcedir}/nv.d3.css"/>
  <script src="${_resourcedir}/d3.min.js" type="text/javascript" charset="utf-8"></script>
  <script src="${_resourcedir}/nv.d3.min.js" type="text/javascript" charset="utf-8"></script>
</head>
<body>
<h1>${title}</h1>

<div id="plot">
  <svg/>
</div>

<table>
<thead>
<tr><th>Year</th><th>Average PPM</th></tr>
</thead>
<tbody id="samples">
${samples}
</tbody>
</table>

<script>
  var data = d3.selectAll("#samples tr").selectAll("td").map(function(d) {
      return {x: parseInt(d[0].textContent), y: parseFloat(d[1].textContent)};
  });
  
  var chart = nv.models.lineChart()
      .margin({left: 100})
      .useInteractiveGuideline(true)
      .transitionDuration(350)
      .showLegend(true)
      .showYAxis(true)
      .showXAxis(true);
  
  chart.xAxis
      .axisLabel('Year');
  
  chart.yAxis
      .axisLabel('Parts per Million')
      .tickFormat(d3.format('f'));
  
  d3.select('#plot svg')
      .datum([{key: "Average PPM", values: data}])
      .call(chart);
  
  //Update the chart when window resizes.
  nv.utils.windowResize(function() { chart.update() });
</script>

</body>
</html>
